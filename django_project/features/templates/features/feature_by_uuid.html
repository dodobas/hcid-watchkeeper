{% extends "features/features-base.html" %}
{% load pipeline %}

{% block content %}
<div class="row">
{#    left side #}
    <div class="col-sm-6">
        <div class="row">
            <div class="col-sm-12">
                {# chart#}

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Line Chart</h3>
                    </div>
                    <div class="panel-body">
                        <div id="chartWrap" class='wb-line-chart'></div>
                    </div>
                </div>

            </div>
        </div>


        <div class="row">
            <div class="col-sm-12">
                {#        chart#}

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Map</h3>
                    </div>
                    <div class="panel-body">
                        <div id="featureMapWrap" class='wb-map-wrap'></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
{#  left side end#}
{#  right side#}
    <div class="col-sm-6">

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Form?</h3>
            </div>
            <div class="panel-body">
                <div id="formpWrap" class='wb-form-wrap'>

                    {% include 'attributes/update_feature_form.html'%}

                </div>
            </div>
        </div>
    </div>
{#  right side end#}
</div>



{% endblock %}

{% block extra_js %}
    <script>
        var data = JSON.parse("{{ feature_attribute_data | escapejs }}");

        var featureData = JSON.parse("{{ featureData | escapejs }}");


        var chart = lineChart({
            data: data,
            parentId: '#chartWrap',
            svgClass: 'pie'
        });

        var leafletMap = showMap({
            data: featureData,
            mapId: 'featureMapWrap',
            mapConf: WB.storage.getItem('defaultMapConf')
        });

        addMarkerToMap(featureData._geometry, leafletMap, {
            data: featureData
        });

        WB.storage.setItem('featureMapWrap', leafletMap);


        $("#data-accordion").accordion({
            heightStyle: "content",
            header: "div > h3"
        });
    </script>
{% endblock %}
