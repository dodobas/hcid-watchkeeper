{% extends "imports/import_data_base.html" %}
{% load pipeline %}


{% block content %}
  <div class="container-fluid">
    <div class="row">
      {# side panel #}
      <div class="col-lg-5" id="side_panel">
        <div class="bs-component">
          {% if not report_list %}
            <div class="panel panel-primary">
              <div class="panel-heading panel-heading-title">
                UPLOAD FILE
              </div>
              <div class="panel-body user-profile">
                {% include "imports/upload_file_form.html" %}
              </div>
            </div>
          {% endif %}

          {% if report_list %}
            <div class="panel panel-primary">
            <div class="panel-heading panel-heading-title">
              IMPORT DATA
            </div>
            <div class="panel-body user-profile">
            <br>
            {% if report_list.0 == 0 and report_list.1 == 0 %}
              No rows for add or update.<br><br>
            {% else %}
              Rows for add: {{ report_list.0 }}<br>
              Rows for update: {{ report_list.1 }}<br>
            {% endif %}

            {% if report_list.2 != 0 %}
              Discarded rows: {{ report_list.2 }}<br>
            {% endif %}

            {% if report_list.3 != 0 %}
              Unchanged rows: {{ report_list.3 }}<br>
            {% endif %}

            {% if report_list.4 != 0 %}
              Rows with errors: {{ report_list.4 }}<br>
            {% endif %}

            <br>
            {% if warnings|length > 0 %}
              <b>Warnings:</b><br>
              {% for item in warnings %}
                {{ item }}<br>
              {% endfor %}
              <br>
            {% endif %}

            {% if errors|length > 0 %}
              <b>Errors:</b><br>

              {% for item in errors %}
                {{ item }}<br>
              {% endfor %}
            {% endif %}
            {% include "imports/import_data_form.html" %}
          {% endif %}

          {% if stop_error %}
            <b>Error:</b>
            {{ stop_error_msg|safe }}
          {% endif %}
          </div>
          </div>
        </div>
      </div>
      {# end side panel #}
    </div>
  </div>
{% endblock %}

{% block footer %}
  {% include "footer.html" %}
{% endblock %}
