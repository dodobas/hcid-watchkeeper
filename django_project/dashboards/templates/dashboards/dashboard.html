{% extends "dashboards/dashboard-base.html" %}
{% load pipeline %}

{% block content %}

    <div class="container-fluid">

    <div class="row">
        <div class="col-sm-1">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Groups</h3>
                </div>
                <div class="panel-body">
                    <div id="groupsCnt"></div>
               </div>
            </div>
        </div>

        <div class="col-sm-1">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Items</h3>
                </div>
                <div class="panel-body">
                    <div id="itemsCnt"></div>
               </div>
            </div>
        </div>

    </div>



    <div class="row">
        <div class="col-sm-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Pie 1</h3>
                </div>
                <div class="panel-body">
                    <div id="groupChartWrap"></div>
               </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Pie 2</h3>
                </div>
                <div class="panel-body">
                    asdf
               </div>
            </div>
        </div>


    </div>



    <div class="row">
{#    left side #}
    <div class="col-sm-6">
        <div class="row">
            <div class="col-sm-12">
                {# chart#}

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Pie 1</h3>
                    </div>
                    <div class="panel-body">
                        <div id="pieChart1" class='wb-pie-chart'></div>
                    </div>
                </div>

            </div>
        </div>


        <div class="row">
            <div class="col-sm-12">
                {#        chart#}


            </div>
        </div>
    </div>
{#  left side end#}
{#  right side#}
    <div class="col-sm-6">

        <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Map</h3>
                    </div>
                    <div class="panel-body">
                        <div id="featureMapWrap" class='wb-map-wrap'></div>
                    </div>
                </div>
    </div>
{#  right side end#}
</div>


    </div>




{% endblock %}

{% block extra_js %}
    <script>
        var data = JSON.parse("{{ group_cnt | escapejs }}");

        var fencing_cnt = JSON.parse("{{ fencing_cnt | escapejs }}");
        var schemetype_cnt = JSON.parse("{{ schemetype_cnt | escapejs }}");
        var functioning_cnt = JSON.parse("{{ functioning_cnt | escapejs }}");
        var yield_cnt = JSON.parse("{{ yield_cnt | escapejs }}");

        var itemsCnt = document.getElementById('itemsCnt');
        var groupsCnt = document.getElementById('groupsCnt');

        itemsCnt.innerHTML = 0;
        groupsCnt.innerHTML = 0;

        if ((data || []) && data.length > 0) {
            itemsCnt.innerHTML = _.sumBy(data, 'cnt');
            groupsCnt.innerHTML = data.length;
        }

        var chart = donutChart({
            data: data,
            parentId: '#groupChartWrap',
            svgClass: 'pie'
        });
    </script>
{% endblock %}
