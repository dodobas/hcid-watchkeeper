{% extends "healthsites/base.html" %}
{% load pipeline %}

{% block header %}
    {% javascript 'table_data_report' %}
{% endblock %}


{% block content %}

    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">
            <div id='healthsites-reports-wrap'>
                <table id="example" class="display" width="100%"></table>
            </div>
        </div>
    </div>
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    {# TODO add to contrib later#}
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css" />
    <link href='https://cdn.datatables.net/select/1.2.4/css/select.dataTables.min.css' rel="stylesheet"/>
    <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
    <script type="text/javascript" src='https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js'></script>
    <script type="text/javascript" src='https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js'></script>

<script type="text/javascript" src='https://cdn.datatables.net/select/1.2.4/js/dataTables.select.min.js'></script>


    <script type="text/javascript" src='https://cdn.datatables.net/buttons/1.5.0/js/dataTables.buttons.min.js'></script>



{% endblock content %}

{% block extra_js %}

    <script>
        $(document).ready(function() {
            set_offset();

            WB.globals.reportTableData = JSON.parse("{{ data | escapejs }}");

            var opts = {
                "columnDefs": [{
                    targets: 0,
                    searchable: false,
                    render: function ( data, type, row ) {
                        return '$'+ data;
                    }
                }


            ]}
            const columnDef = [
                    { data: "id", title: "Id" },
                    { data: "name", title: "Name" },
                    { data: "geometry", title: "Geometry" },
                    { data: "country", title: "Country"  },
                    { data: "overall_assessment", title: "Overall"  },
                    { data: "enriched", title: "Enriched"  },
                    { data: "created_date", title: "Created"  },
                   // { data: "assessment" }

                    { data: "data_captor", title: "Captor" },
                ];

            WB.tableReports.init('#example', WB.globals.reportTableData, columnDef);

        });
    </script>

{% endblock %}

